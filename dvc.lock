schema: '2.0'
stages:
  data_ingestion_stage:
    cmd: python -m email_spam_classification.data_ingestion
    deps:
    - path: data/raw/emails.csv
      hash: md5
      md5: 008dcf9ca6aab621d3b3831db6815867
      size: 503663
    - path: email_spam_classification/data_ingestion.py
      hash: md5
      md5: 39a95e065c40bcec35864358603a77b6
      size: 3078
    outs:
    - path: data/interim/data.csv
      hash: md5
      md5: 6feca6734d849c6a744b5ecfad70830f
      size: 84467
  data_cleaning_stage:
    cmd: python -m email_spam_classification.data_cleaning
    deps:
    - path: data/interim/data.csv
      hash: md5
      md5: 6feca6734d849c6a744b5ecfad70830f
      size: 84467
    - path: email_spam_classification/data_cleaning.py
      hash: md5
      md5: 1d81cbe6876c387bead27ae7d3b4c57b
      size: 2564
    - path: utils/text_cleaner.py
      hash: md5
      md5: fc0b15e7bdfc41ee511cc97403c4f369
      size: 1692
    params:
      params.yaml:
        data_cleaning.test_size: 0.2
    outs:
    - path: data/interim/X_test.csv
      hash: md5
      md5: f7fc3d1b47e61caf257c7e1476eb618f
      size: 10233
    - path: data/interim/X_train.csv
      hash: md5
      md5: d16efa35ccfe94d4a3ff21f1d9734e21
      size: 41220
    - path: data/interim/y_test.csv
      hash: md5
      md5: d11b6ddb2b56707048e1a011a1e27ba1
      size: 406
    - path: data/interim/y_train.csv
      hash: md5
      md5: 771a842b772e7798d66e7ab1713e0bb1
      size: 1606
    - path: models/text_cleaner.pkl
      hash: md5
      md5: 797812ab0d8faa9d6b067d5f3b333b3a
      size: 16407122
  feature_engineering_stage:
    cmd: python -m email_spam_classification.feature_engineering
    deps:
    - path: data/interim/X_test.csv
      hash: md5
      md5: f7fc3d1b47e61caf257c7e1476eb618f
      size: 10233
    - path: data/interim/X_train.csv
      hash: md5
      md5: d16efa35ccfe94d4a3ff21f1d9734e21
      size: 41220
    - path: data/interim/y_test.csv
      hash: md5
      md5: d11b6ddb2b56707048e1a011a1e27ba1
      size: 406
    - path: data/interim/y_train.csv
      hash: md5
      md5: 771a842b772e7798d66e7ab1713e0bb1
      size: 1606
    - path: email_spam_classification/feature_engineering.py
      hash: md5
      md5: 5eaf9b3d84f045bf99dab58af2aef8ec
      size: 3244
    params:
      params.yaml:
        feature_engineering.TfIdfVectorizer.max_features: 10000
        feature_engineering.TfIdfVectorizer.ngram_range:
        - 1
        - 2
        feature_engineering.type: TfIdfVectorizer
    outs:
    - path: data/processed/X_test.csv
      hash: md5
      md5: b160072509883007f2c6e469a38b1401
      size: 6554027
    - path: data/processed/X_train.csv
      hash: md5
      md5: ec26b5c9063f75747012889b84d5a7de
      size: 26206520
    - path: data/processed/y_test.csv
      hash: md5
      md5: d11b6ddb2b56707048e1a011a1e27ba1
      size: 406
    - path: data/processed/y_train.csv
      hash: md5
      md5: 771a842b772e7798d66e7ab1713e0bb1
      size: 1606
    - path: models/text_vectorizer.pkl
      hash: md5
      md5: a15cfafbc16ff6ea6fa6e8f35a5afa71
      size: 320335
  model_building_stage:
    cmd: python -m email_spam_classification.model_building
    deps:
    - path: data/processed/X_train.csv
      hash: md5
      md5: ec26b5c9063f75747012889b84d5a7de
      size: 26206520
    - path: data/processed/y_train.csv
      hash: md5
      md5: 771a842b772e7798d66e7ab1713e0bb1
      size: 1606
    - path: email_spam_classification/model_building.py
      hash: md5
      md5: d32205a3ae5bf9354a1cfb66e578ac76
      size: 2974
    params:
      params.yaml:
        model_building.RandomForest.max_depth: 30
        model_building.RandomForest.min_samples_leaf: 10
        model_building.RandomForest.min_samples_split: 5
        model_building.RandomForest.n_estimators: 500
        model_building.RandomForest.random_state: 42
        model_building.type: RandomForest
    outs:
    - path: models/model.pkl
      hash: md5
      md5: 2cd98464e5fcadad93a106ffd74385ca
      size: 338632
  model_evaluation_stage:
    cmd: python -m email_spam_classification.model_evaluation
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: b160072509883007f2c6e469a38b1401
      size: 6554027
    - path: data/processed/y_test.csv
      hash: md5
      md5: d11b6ddb2b56707048e1a011a1e27ba1
      size: 406
    - path: email_spam_classification/model_evaluation.py
      hash: md5
      md5: a4a7152a2d4e3dad7ddf142345113fc3
      size: 5348
    - path: models/model.pkl
      hash: md5
      md5: 2cd98464e5fcadad93a106ffd74385ca
      size: 338632
    outs:
    - path: metrics.json
      hash: md5
      md5: 31b1f1acf4360b9303f10e2cbef9aa14
      size: 82
  stage_change:
    cmd: python email_spam_classification/model_stage_change.py
