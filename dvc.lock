schema: '2.0'
stages:
  data_ingestion_stage:
    cmd: python -m email_spam_classification.data_ingestion
    deps:
    - path: email_spam_classification/data_ingestion.py
      hash: md5
      md5: 0adc460c59a13dbd6b89ed3d9aa21868
      size: 3103
    - path: emails.csv
      hash: md5
      md5: 008dcf9ca6aab621d3b3831db6815867
      size: 503663
    outs:
    - path: data/raw/
      hash: md5
      md5: 0dcd8369e2de68bb1c6df50fbae22f03.dir
      size: 83189
      nfiles: 1
  data_cleaning_stage:
    cmd: python -m email_spam_classification.data_cleaning
    deps:
    - path: data/raw/
      hash: md5
      md5: 0dcd8369e2de68bb1c6df50fbae22f03.dir
      size: 83189
      nfiles: 1
    - path: email_spam_classification/data_cleaning.py
      hash: md5
      md5: 9a8f1e24813959eb32da02e68b2654d4
      size: 2603
    - path: utils/text_cleaner.py
      hash: md5
      md5: fc0b15e7bdfc41ee511cc97403c4f369
      size: 1692
    params:
      params.yaml:
        data_cleaning.test_size: 0.1
    outs:
    - path: data/interim/
      hash: md5
      md5: 15c5a2eaf0a429c502273aad7b38c6f1.dir
      size: 52949
      nfiles: 4
    - path: models/text_cleaner.pkl
      hash: md5
      md5: 554fbea86cea791ed2e4722ca0e433b2
      size: 16404690
  feature_engineering_stage:
    cmd: python -m email_spam_classification.feature_engineering
    deps:
    - path: data/interim/
      hash: md5
      md5: 15c5a2eaf0a429c502273aad7b38c6f1.dir
      size: 52949
      nfiles: 4
    - path: email_spam_classification/feature_engineering.py
      hash: md5
      md5: 5183fc744ecdb13147f444b3efe155ab
      size: 3287
    params:
      params.yaml:
        feature_engineering.TfIdfVectorizer.max_features: 10000
        feature_engineering.TfIdfVectorizer.ngram_range:
        - 1
        - 2
        feature_engineering.type: TfIdfVectorizer
    outs:
    - path: data/processed/
      hash: md5
      md5: fc4eadce678348a840e21c9849188b5d.dir
      size: 35702284
      nfiles: 4
    - path: models/text_vectorizer.pkl
      hash: md5
      md5: 12002a9c867c74eeaf5791487f4d28e2
      size: 349540
  model_building_stage:
    cmd: python -m email_spam_classification.model_building
    deps:
    - path: data/processed/
      hash: md5
      md5: fc4eadce678348a840e21c9849188b5d.dir
      size: 35702284
      nfiles: 4
    - path: email_spam_classification/model_building.py
      hash: md5
      md5: d32205a3ae5bf9354a1cfb66e578ac76
      size: 2974
    params:
      params.yaml:
        model_building.RandomForest.max_depth: 30
        model_building.RandomForest.min_samples_leaf: 10
        model_building.RandomForest.min_samples_split: 5
        model_building.RandomForest.n_estimators: 500
        model_building.RandomForest.random_state: 42
        model_building.type: RandomForest
    outs:
    - path: models/model.pkl
      hash: md5
      md5: 26d4cee3d20bd77ca5b908ab07ac11ee
      size: 359171
  model_evaluation_stage:
    cmd: python -m email_spam_classification.model_evaluation
    deps:
    - path: data/processed/
      hash: md5
      md5: fc4eadce678348a840e21c9849188b5d.dir
      size: 35702284
      nfiles: 4
    - path: email_spam_classification/model_evaluation.py
      hash: md5
      md5: a4a7152a2d4e3dad7ddf142345113fc3
      size: 5348
    - path: models/model.pkl
      hash: md5
      md5: 26d4cee3d20bd77ca5b908ab07ac11ee
      size: 359171
    outs:
    - path: metrics.json
      hash: md5
      md5: 59a63a07821a79eb053831c651e618ca
      size: 80
  stage_change:
    cmd: python email_spam_classification/model_stage_change.py
