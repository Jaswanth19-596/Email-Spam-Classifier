schema: '2.0'
stages:
  data_ingestion_stage:
    cmd: python -m email_spam_classification.data_ingestion
    deps:
    - path: data/raw/emails.csv
      hash: md5
      md5: 008dcf9ca6aab621d3b3831db6815867
      size: 503663
    - path: email_spam_classification/data_ingestion.py
      hash: md5
      md5: dceb0ef5a43599b799a1f61d1ba3c11c
      size: 2471
    outs:
    - path: data/interim/data.csv
      hash: md5
      md5: d3f53c30687ee709c8b54a02a40f654f
      size: 427525
  data_cleaning_stage:
    cmd: python -m email_spam_classification.data_cleaning
    deps:
    - path: data/interim/data.csv
      hash: md5
      md5: d3f53c30687ee709c8b54a02a40f654f
      size: 427525
    - path: email_spam_classification/data_cleaning.py
      hash: md5
      md5: 61ebd71fa014dcbb8ab63d14dfd5d55a
      size: 2473
    - path: utils/text_cleaner.py
      hash: md5
      md5: 32199347f9f358763708546c9bc9eb1b
      size: 1555
    params:
      params.yaml:
        data_cleaning.test_size: 0.2
    outs:
    - path: data/interim/X_test.csv
      hash: md5
      md5: bdd79a04436a4294b53f2ca8ef688fc2
      size: 52082
    - path: data/interim/X_train.csv
      hash: md5
      md5: c787d5d2825f9d9976e37eb7a8176cc7
      size: 207940
    - path: data/interim/y_test.csv
      hash: md5
      md5: b013ed448c2241a2a72435be1ca58a5b
      size: 2074
    - path: data/interim/y_train.csv
      hash: md5
      md5: 38ab815b3afbbb57e8b99dab64705f0d
      size: 8276
    - path: models/text_cleaner.pkl
      hash: md5
      md5: f7924c50bf165ed92db43da864ad8f54
      size: 16562898
  feature_engineering_stage:
    cmd: python -m email_spam_classification.feature_engineering
    deps:
    - path: data/interim/X_test.csv
      hash: md5
      md5: bdd79a04436a4294b53f2ca8ef688fc2
      size: 52082
    - path: data/interim/X_train.csv
      hash: md5
      md5: c787d5d2825f9d9976e37eb7a8176cc7
      size: 207940
    - path: data/interim/y_test.csv
      hash: md5
      md5: b013ed448c2241a2a72435be1ca58a5b
      size: 2074
    - path: data/interim/y_train.csv
      hash: md5
      md5: 38ab815b3afbbb57e8b99dab64705f0d
      size: 8276
    - path: email_spam_classification/feature_engineering.py
      hash: md5
      md5: 46b2fe85c9801b2fd06845445adf76bb
      size: 3277
    params:
      params.yaml:
        feature_engineering.TfIdfVectorizer.max_features: 10000
        feature_engineering.TfIdfVectorizer.ngram_range:
        - 1
        - 3
        feature_engineering.type: TfIdfVectorizer
    outs:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 3b816686fdc128fa86cb3dd8756eee9f
      size: 41540423
    - path: data/processed/X_train.csv
      hash: md5
      md5: 4e6c77032100025e73a3e29635b9fb7c
      size: 166113640
    - path: data/processed/y_test.csv
      hash: md5
      md5: b013ed448c2241a2a72435be1ca58a5b
      size: 2074
    - path: data/processed/y_train.csv
      hash: md5
      md5: 38ab815b3afbbb57e8b99dab64705f0d
      size: 8276
    - path: models/text_vectorizer.pkl
      hash: md5
      md5: df4f3438d0730411ff2811eab0321c3d
      size: 411218
  model_building_stage:
    cmd: python -m email_spam_classification.model_building
    deps:
    - path: data/processed/X_train.csv
      hash: md5
      md5: 4e6c77032100025e73a3e29635b9fb7c
      size: 166113640
    - path: data/processed/y_train.csv
      hash: md5
      md5: 38ab815b3afbbb57e8b99dab64705f0d
      size: 8276
    - path: email_spam_classification/model_building.py
      hash: md5
      md5: c180f73bb741160c9bd935862b98f7aa
      size: 2990
    params:
      params.yaml:
        model_building.RandomForest.max_depth: 30
        model_building.RandomForest.min_samples_leaf: 10
        model_building.RandomForest.min_samples_split: 5
        model_building.RandomForest.n_estimators: 200
        model_building.RandomForest.random_state: 42
        model_building.type: RandomForest
    outs:
    - path: models/model.pkl
      hash: md5
      md5: c789213e94ef75fca5b498891108edda
      size: 757699
  model_evaluation_stage:
    cmd: python -m email_spam_classification.model_evaluation
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 3b816686fdc128fa86cb3dd8756eee9f
      size: 41540423
    - path: data/processed/y_test.csv
      hash: md5
      md5: b013ed448c2241a2a72435be1ca58a5b
      size: 2074
    - path: email_spam_classification/model_evaluation.py
      hash: md5
      md5: 9678a0cb3b12320667e7a44e5419def9
      size: 5328
    - path: models/model.pkl
      hash: md5
      md5: c789213e94ef75fca5b498891108edda
      size: 757699
    outs:
    - path: metrics.json
      hash: md5
      md5: d235ede86cfbbf8bfd813bffe849542a
      size: 109
  stage_change:
    cmd: python email_spam_classification/model_stage_change.py
